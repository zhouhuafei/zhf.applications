"use strict";var tools=require("zhf.tools");function Applications(){}Applications.prototype.setCookie=function(t,e,o,n,i,r){var s=new Date,a=s.getTime();s.setTime(a+24*o*60*60*1e3);var c=t+"="+e;o&&(c+="; expires="+s),n&&(c+="; domain="+n),i&&(c+="; path="+i),r&&(c+="; secure="+r),document.cookie=c},Applications.prototype.getCookie=function(t){var e="";return document.cookie.split("; ").forEach(function(o){var n=o.split("=");n[0]===t&&(e=n[1])}),e},Applications.prototype.removeCookie=function(t,e,o,n){this.setCookie(t,"",-1,e,o,n)},Applications.prototype.createElement=function(t){var e=t||{};e.elementName=e.elementName||"div",e.style=e.style||{},e.customAttribute=e.customAttribute||{},e.attribute=e.attribute||{};var o=document.createElement(e.elementName);return Object.keys(e.style).forEach(function(t){o.style[t]=e.style[t]}),Object.keys(e.customAttribute).forEach(function(t){o.setAttribute("data-"+t,e.customAttribute[t])}),Object.keys(e.attribute).forEach(function(t){o[t]=e.attribute[t]}),o},Applications.prototype.addMinusInput=function(t){if(t){var e=t.noActiveClass||"on",o=void 0===t.minNum?1:t.minNum,n=t.add,i=t.addCallback,r=t.minus,s=t.minusCallback,a=t.overMinCallback||function(){},c=t.input,l=t.blurCallback,u=parseInt(t.inventoryNum),p=function(){""===c.value.trim()&&(c.value=o)};n.onclick=function(){p();var t=parseInt(c.value);t++,c.value=t,t>=u&&(c.value=0===u?o:u,n.classList.add(e)),r.classList.remove(e),i&&i()},r.onclick=function(){p();var t=parseInt(c.value);t--,c.value=t,t<o&&(c.value=o,r.classList.add(e),a()),n.classList.remove(e),s&&s()},c.onfocus=function(){c.select()},c.onblur=function(){p();var t=parseInt(c.value);isNaN(t)&&(t=o),r.classList.remove(e),n.classList.remove(e),t>=u&&(c.value=u,n.classList.add(e)),t<=o&&(c.value=o,r.classList.add(e)),l&&l()}}else console.log("no find parameter")},Applications.prototype.getDomArray=function(t){var e=[];return t&&("string"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()&&(e=[].slice.call(document.querySelectorAll(t))),1===t.nodeType&&(e=[t]),"htmlcollection"!==Object.prototype.toString.call(t).slice(8,-1).toLowerCase()&&"nodelist"!==Object.prototype.toString.call(t).slice(8,-1).toLowerCase()||(e=[].slice.call(t))),e},Applications.prototype.getParent=function(t,e){if(!(t=this.getDomArray(t)[0]))return console.log("第一个参数有误"),null;if(!e)return t.parentNode;if("string"==typeof e)switch(t=t.parentNode,e.charAt(0)){case".":for(;t;){if(!t.classList)return console.log("no find class"),null;if(t.classList.contains(e.substring(1)))return t;t=t.parentNode}break;case"#":for(;t;){if(t===document)return console.log("no find id"),null;if(t.id===e.substring(1))return t;t=t.parentNode}break;default:for(;t;){if(t===document)return console.log("no find tagName"),null;if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}return null},Applications.prototype.htmlToDom=function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]},Applications.prototype.imgUploadBase64=function(){function t(t){this.opts=t||{},this.opts.input?(this.opts.limitNum=this.opts.limitNum||"5",this.opts.changeCallback=this.opts.changeCallback||function(){console.log("no find changeCallback")},this.opts.base64Callback=this.opts.base64Callback||function(){console.log("no find base64Callback")},this.init()):console.log("no find input")}return t.prototype.init=function(){this.render(),this.power()},t.prototype.render=function(){},t.prototype.power=function(){this.events()},t.prototype.events=function(){this.eventsInputChange()},t.prototype.eventsInputChange=function(){var t=this,e=this.opts.limitNum;this.opts.input.addEventListener("change",function(){var o=0;t.imgData=[];for(var n=this.files,i=n.length,r=0;r<i;r++){var s=n[r];/image/gi.test(s.type)&&o<e&&(t.imgData.push(s),o++)}t.opts.changeCallback({imgData:t.imgData}),t.fileReadAsDataURL()})},t.prototype.fileReadAsDataURL=function(){var t=this;this.imgData.forEach(function(e,o){var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(){t.opts.base64Callback({base64:this.result,index:o})})})},t},Applications.prototype.isPc=function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0,n=0;n<e.length;n++)if(t.indexOf(e[n])>0){o=!1;break}return o},Applications.prototype.isWeiXin=function(){return navigator.userAgent.toLowerCase().match(/MicroMessenger/gi)},Applications.prototype.isAndroid=function(){return window.navigator.appVersion.match(/android/gi)},Applications.prototype.isIphone=function(){return window.navigator.appVersion.match(/iphone/gi)},Applications.prototype.offset=function(t){var e=0,o=0;for(t=this.getDomArray(t)[0];t;)e+=t.offsetTop,o+=t.offsetLeft,t=t.offsetParent;return{top:e,left:o}},Applications.prototype.scrollToY=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",e=document.documentElement.scrollTop||document.body.scrollTop,o=0,n=null;requestAnimationFrame(function i(){o=Math.ceil((e-t)/6),e-=o,window.scrollTo(0,e),n=requestAnimationFrame(i),e<=1*t&&cancelAnimationFrame(n)})},Applications.prototype.select=function(){var t=this;function e(e){this.opts=tools.extend({defaults:{items:null,callback:{click:function(){}}},inherits:e}),this.itemsDom=t.getDomArray(this.opts.items),this.init()}return e.prototype.init=function(){this.power()},e.prototype.selectNothing=function(){this.itemsDom.forEach(function(t){t.checked=!1})},e.prototype.selectAll=function(){this.itemsDom.forEach(function(t){t.checked=!0})},e.prototype.selectReverse=function(){this.itemsDom.forEach(function(t){t.checked=!t.checked})},e.prototype.power=function(){var t=this;this.itemsDom.forEach(function(e){e.addEventListener("click",function(){var e=!0;t.itemsDom.forEach(function(t){!1===t.checked&&(e=!1)}),t.opts.callback.click({element:this,isCheckedAll:e})})})},e},Applications.prototype.whenScrollBottom=function(){function t(t){this.opts=tools.extend({defaults:{callback:{success:function(){},failure:function(){}},isBindScrollEvent:!0,isInitRender:!0,interval:80,errorHeight:0},inherits:t}),this.timer=null,this.isLoadOver=!1,this.init()}return t.prototype.init=function(){this.opts.isInitRender&&this.render(),this.power()},t.prototype.render=function(){var t=this.opts.callback,e=document.body.scrollHeight;(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.clientHeight>=e-this.opts.errorHeight&&!this.isLoadOver?(this.isLoadOver=!0,t.success(this)):t.failure()},t.prototype.dataLoadContinue=function(){this.isLoadOver=!1},t.prototype.scroll=function(){var t=this;clearTimeout(t.timer),t.timer=setTimeout(function(){t.render()},t.opts.interval)},t.prototype.power=function(){var t=this;t.opts.isBindScrollEvent&&window.addEventListener("scroll",function(){t.scroll()})},t},Applications.prototype.whetherDisableScroll=function(){return{stopPropagation:function(t){t.stopPropagation()},preventDefault:function(t){t.preventDefault()},returnFalse:function(t){t.preventDefault(),t.stopPropagation()},noScroll:function(){document.addEventListener("touchmove",this.preventDefault,!1),document.documentElement.style.overflow="hidden"},yesScroll:function(){document.removeEventListener("touchmove",this.preventDefault,!1),document.documentElement.style.overflow="auto"}}},module.exports=new Applications;